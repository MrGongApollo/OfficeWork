(function ($) { $.setting = {}, $.ban = { banMouseRight: function (e) { $("body").bind("contextmenu", function () { return false }); if (e) { e() } }, banSelectAll: function (e) { $("body").bind("selectstart", function () { return false }); if (e) { e() } }, banF12: function (e) { $("body").bind("keypress", function (e) { if (e.keyCode == 123) return false }) }, banAll: function () { $.ban.banMouseRight(); $.ban.banSelectAll(); $.ban.banF12() } }, $.web = { today: function (e) { var t = new Date, n = t.getMonth() + 1, a = n < 10 ? "0" + n : n, r = t.getDate() < 10 ? "0" + t.getDate() : t.getDate(); return e ? t.getFullYear() + e + a + e + r : t.getFullYear() + "-" + a + "-" + r }, Now: function (e) { var t = new Date, n = t.getMonth() + 1, a = n < 10 ? "0" + n : n, r = t.getDate() < 10 ? "0" + t.getDate() : t.getDate(), o = t.getHours(), s = t.getMinutes(), i = t.getSeconds(); return e ? t.getFullYear() + e + a + e + r + " " + o + ":" + s + ":" + i : t.getFullYear() + "-" + a + "-" + r + " " + o + ":" + s + ":" + i }, dateAddDays: function (date, days) { dateArray = String(date).split("-"); if (dateArray.length != 3) { return } var newDate = new Date(new Date(dateArray[0], eval(dateArray[1]) - 1, dateArray[2]).valueOf() + days * 24 * 60 * 60 * 1e3), newYear = newDate.getFullYear(), newMonth = (newDate.getMonth() < 9 ? "0" : "") + (newDate.getMonth() + 1), newDay = (newDate.getDate() < 10 ? "0" : "") + newDate.getDate(); return newYear + "-" + newMonth + "-" + newDay }, changeDateFormat: function (e, t) { if (!e) { return "" } if (e.indexOf("/Date") == 0) { d = new Date; var n = new Date(parseInt(e.replace("/Date(", "").replace(")/", ""), 10)); var a = n.getMonth() + 1 < 10 ? "0" + (n.getMonth() + 1) : n.getMonth() + 1; var r = n.getDate() < 10 ? "0" + n.getDate() : n.getDate(); var o = "-"; o = t ? t : o; return n.getFullYear() + o + a + o + r } else { return e } }, changetoLocaleTimeString: function (e, t) { if (!e) { return "" } d = new Date; var n = new Date(parseInt(e.substr(6))); var a = n.getMonth() + 1 < 10 ? "0" + (n.getMonth() + 1) : n.getMonth() + 1; var r = n.getDate() < 10 ? "0" + n.getDate() : n.getDate(); var o = n.getHours() < 10 ? "0" + n.getHours() : n.getHours(); var s = n.getMinutes() < 10 ? "0" + n.getMinutes() : n.getMinutes(); var i = n.getSeconds() < 10 ? "0" + n.getSeconds() : n.getSeconds(); var u = "-"; u = t ? t : u; return n.getFullYear() + u + a + u + r + " " + o + ":" + s + ":" + i }, changetoLocaleTimeString2hm: function (e, t) { if (!e) { return "" } d = new Date; var n = new Date(parseInt(e.substr(6))); var a = n.getMonth() + 1 < 10 ? "0" + (n.getMonth() + 1) : n.getMonth() + 1; var r = n.getDate() < 10 ? "0" + n.getDate() : n.getDate(); var o = n.getHours() < 10 ? "0" + n.getHours() : n.getHours(); var s = n.getMinutes() < 10 ? "0" + n.getMinutes() : n.getMinutes(); var i = "-"; i = t ? t : i; return n.getFullYear() + i + a + i + r + " " + o + ":" + s }, dateFormat: function (e, t) { var n = { numeric: /N\d{1}/gi, percent: /P\d{1}/gi, currency: /C/gi, datetime: /yy(yy{0,1})|M{2}|dd|HH{1}|mm{1}|ss{1}/gi }; if (t.match(n.datetime) !== null) { var a = e; var r = { msJsonDate: /^\/Date\(\d*(|\+?\d*)\)\/$/gi, stringDate: /^\d{4}[\.\/-]?[0-1]{1}[0-9]{1}(|[\.\/-]?[0-3]{1}[0-9]{1}[\.\/-]?|\s?[0-1]{1}[0-9]{1}|:?[0-1]{1}[0-9]{1}|:?[0-1]{1}[0-9]{1}|:?\d*)$/gi, dtData: /^\d{8}\s\d{2}:\d{2}:\d{2}$/, cludeTDate: /^\d{4}-\d{2}-\d{2}(T|t)\d{2}:\d{2}:\d{2}/ }; if (e instanceof Date === false) { if (r.msJsonDate.test(e)) { var o = /^\/Date\(|\)\/$/gi; var s = (e + "").replace(o, "").split("+"); if (s.length > 1) { a = new Date(parseInt(s[0]) + parseInt(s[1])) } else { var i = new Date; var u = i.getTimezoneOffset() * 6e4; u = 0; a = new Date(parseInt(s[0]) + u) } } else if (r.stringDate.test(e)) { if ($.isNumeric(e) === true) { var c = (e + "").substr(0, 4); var d = (e + "").substr(4, 2); var l = (e + "").substr(6, 2); var g = (e + "").substr(8, 2); var f = (e + "").substr(10, 2); var w = (e + "").substr(12, 2); a = new Date(c + "/" + d + "/" + (l === "" ? "01" : l) + " " + (g === "" ? "00" : g) + ":" + (f === "" ? "00" : f) + ":" + (w === "" ? "00" : w)) } else { a = (e + "").replace(/[-\.]/g, "/"); a = new Date(a) } } else if (r.dtData.test(e)) { var c = (e + "").substr(0, 4); var d = (e + "").substr(4, 2); var l = (e + "").substr(6, 2); var g = (e + "").substr(8); a = new Date(c + "/" + d + "/" + l + g) } else if (r.cludeTDate.test(e)) { var c = (e + "").substr(0, 4); var d = (e + "").substr(5, 2); var l = (e + "").substr(8, 2); var g = (e + "").substr(11); a = new Date(c + "/" + d + "/" + l + " " + g) } } var p = function (e, t) { if (!t) { t = 2 } e = new String(e); for (var n = 0, a = ""; n < t - e.length; n++) { a += "0" } return a + e }; if (a instanceof Date) { return t.replace(n.datetime, function (e) { switch (e) { case "dd": return p(a.getDate()); case "MM": return p(a.getMonth() + 1); case "yy": return new String(a.getFullYear()).substr(2); case "yyyy": return a.getFullYear(); case "HH": return p(a.getHours()); case "mm": return p(a.getMinutes()); case "ss": return p(a.getSeconds()) } }) } else { return e } } else { return e } }, getUrlParam: function (e) { var t = new RegExp("(^|&)" + e + "=([^&]*)(&|$)"); var n = window.location.search.substr(1).match(t); if (n != null) { return unescape(n[2]) } return null }, IsNullOrEmpty: function (e) { if (e) { var t; if (e == null || e == "") { t = true } else { t = false } return t } }, Substr: function (e, t, n) { if (e && t) { return e.length > t ? e.substr(0, t) + (n || "") : e } return "" }, AddLoading: function (e) { if ($("#wxloading").length == 0) { $("<div>", { id: "wxloading" }).append($("<div>", { class: "wx_loading_inner" }).append($("<svg>", { class: "wx_loading_icon" })).append($("<span>").text(e ? e : "正在加载..."))).appendTo($("body")) } else { $("#wxloading").show() } }, RemoveLoading: function () { $("#wxloading").remove() }, AddLoadingSetClose: function (e, t, n) { $.web.AddLoading(e); setTimeout(function () { if (t) { t() } $.web.RemoveLoading() }, n || 1e3) }, toast: function (e) { switch (typeof e) { case "string": e = { text: e }; break; case "object": break; default: console.warn("toast参数不合法，必须是object或者string类型"); return } var t = { text: "", duration: 3e3 }; var n = $(window).width(); $.extend(t, e); $("#wxtoast").length == 0 ? "" : $("#wxtoast").stop().unbind().remove(); $("body").append($("<div>", { id: "wxtoast" }).hide().text(t.text)); var a = $("#wxtoast"); a.css("left", (n - a.width()) / 2); $("#wxtoast").show().fadeOut(t.duration, function () { $("#wxtoast").remove() }) }, get: function (e, t) { var n = { type: "GET", contentType: "application/json;application/x-www-form-urlencoded;charset=utf-8", dataType: "json", async: false }, a = { OnSuccess: function () { }, onFailure: function () { }, OnComplete: function () { } }; if (!e) { console.warn("参数不可为空！"); return } switch (typeof e) { case "string": n.url = encodeURI(e); break; case "object": e.url = encodeURI(e.url); $.extend(n, e); break; default: console.warn("参数类型不正确，必须是string,或者object"); return } if (t) { $.extend(a, t) } $.ajax(n).done(function (e) { a.OnSuccess(e) }).fail(function (e) { a.onFailure(e) }).always(function () { a.OnComplete() }) }, post: function (e, t, n, a) { $.ajax({ url: encodeURI(e), async: false, type: "POST", data: JSON.stringify(t), contentType: "application/json;application/x-www-form-urlencoded;charset=utf-8", dataType: "json" }).done(function (e) { if (n) { n(e) } }).fail(function (e) { if (a) { a(e) } }) }, postAsync: function (e, t, n, a) { $.ajax({ url: encodeURI(e), type: "POST", data: JSON.stringify(t), contentType: "application/json;application/x-www-form-urlencoded;charset=utf-8", dataType: "json" }).done(function (e) { if (n) { n(e) } }).fail(function (e) { if (a) { a(e) } }) }, postWithOption: function (e, t) { try { var n = { type: "POST", contentType: "application/json;application/x-www-form-urlencoded;charset=utf-8", dataType: "json" }, a = { OnSuccess: function () { }, onFailure: function () { }, OnComplete: function () { } }; e.url = encodeURI(e.url); e.data = JSON.stringify(e.data); $.extend(n, e); if (t) { $.extend(a, t) } $.ajax(n).done(function (e) { a.OnSuccess(e) }).fail(function (e) { a.onFailure(e) }).always(function () { a.OnComplete() }) } catch (e) { } } } })(jQuery);