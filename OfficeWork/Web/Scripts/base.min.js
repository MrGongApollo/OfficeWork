(function ($) { $.setting = {}, $.ban = { banMouseRight: function (e) { $("body").bind("contextmenu", function () { return false }); if (e) { e() } }, banSelectAll: function (e) { $("body").bind("selectstart", function () { return false }); if (e) { e() } }, banF12: function (e) { $("body").bind("keypress", function (e) { if (e.keyCode == 123) return false }) }, banAll: function () { $.ban.banMouseRight(); $.ban.banSelectAll(); $.ban.banF12() } }; var WebUntils = function () { }; WebUntils.prototype = { today: function (e) { var t = new Date, a = t.getMonth() + 1, n = a < 10 ? "0" + a : a, r = t.getDate() < 10 ? "0" + t.getDate() : t.getDate(); return e ? t.getFullYear() + e + n + e + r : t.getFullYear() + "-" + n + "-" + r }, Now: function (e) { var t = new Date, a = t.getMonth() + 1, n = a < 10 ? "0" + a : a, r = t.getDate() < 10 ? "0" + t.getDate() : t.getDate(), s = t.getHours(), o = t.getMinutes(), u = t.getSeconds(); return e ? t.getFullYear() + e + n + e + r + " " + s + ":" + o + ":" + u : t.getFullYear() + "-" + n + "-" + r + " " + s + ":" + o + ":" + u }, dateAddDays: function (date, days) { dateArray = String(date).split("-"); if (dateArray.length != 3) { return } var newDate = new Date(new Date(dateArray[0], eval(dateArray[1]) - 1, dateArray[2]).valueOf() + days * 24 * 60 * 60 * 1e3), newYear = newDate.getFullYear(), newMonth = (newDate.getMonth() < 9 ? "0" : "") + (newDate.getMonth() + 1), newDay = (newDate.getDate() < 10 ? "0" : "") + newDate.getDate(); return newYear + "-" + newMonth + "-" + newDay }, changeDateFormat: function (e, t) { if (!e) { return "" } if (e.indexOf("/Date") == 0) { d = new Date; var a = new Date(parseInt(e.replace("/Date(", "").replace(")/", ""), 10)); var n = a.getMonth() + 1 < 10 ? "0" + (a.getMonth() + 1) : a.getMonth() + 1; var r = a.getDate() < 10 ? "0" + a.getDate() : a.getDate(); var s = "-"; s = t ? t : s; return a.getFullYear() + s + n + s + r } else { return e } }, changetoLocaleTimeString: function (e, t) { if (!e) { return "" } d = new Date; var a = new Date(parseInt(e.substr(6))); var n = a.getMonth() + 1 < 10 ? "0" + (a.getMonth() + 1) : a.getMonth() + 1; var r = a.getDate() < 10 ? "0" + a.getDate() : a.getDate(); var s = a.getHours() < 10 ? "0" + a.getHours() : a.getHours(); var o = a.getMinutes() < 10 ? "0" + a.getMinutes() : a.getMinutes(); var u = a.getSeconds() < 10 ? "0" + a.getSeconds() : a.getSeconds(); var i = "-"; i = t ? t : i; return a.getFullYear() + i + n + i + r + " " + s + ":" + o + ":" + u }, changetoLocaleTimeString2hm: function (e, t) { if (!e) { return "" } d = new Date; var a = new Date(parseInt(e.substr(6))); var n = a.getMonth() + 1 < 10 ? "0" + (a.getMonth() + 1) : a.getMonth() + 1; var r = a.getDate() < 10 ? "0" + a.getDate() : a.getDate(); var s = a.getHours() < 10 ? "0" + a.getHours() : a.getHours(); var o = a.getMinutes() < 10 ? "0" + a.getMinutes() : a.getMinutes(); var u = "-"; u = t ? t : u; return a.getFullYear() + u + n + u + r + " " + s + ":" + o }, dateFormat: function (e, t) { var a = { numeric: /N\d{1}/gi, percent: /P\d{1}/gi, currency: /C/gi, datetime: /yy(yy{0,1})|M{2}|dd|HH{1}|mm{1}|ss{1}/gi }; if (t.match(a.datetime) !== null) { var n = e; var r = { msJsonDate: /^\/Date\(\d*(|\+?\d*)\)\/$/gi, stringDate: /^\d{4}[\.\/-]?[0-1]{1}[0-9]{1}(|[\.\/-]?[0-3]{1}[0-9]{1}[\.\/-]?|\s?[0-1]{1}[0-9]{1}|:?[0-1]{1}[0-9]{1}|:?[0-1]{1}[0-9]{1}|:?\d*)$/gi, dtData: /^\d{8}\s\d{2}:\d{2}:\d{2}$/, cludeTDate: /^\d{4}-\d{2}-\d{2}(T|t)\d{2}:\d{2}:\d{2}/ }; if (e instanceof Date === false) { if (r.msJsonDate.test(e)) { var s = /^\/Date\(|\)\/$/gi; var o = (e + "").replace(s, "").split("+"); if (o.length > 1) { n = new Date(parseInt(o[0]) + parseInt(o[1])) } else { var u = new Date; var i = u.getTimezoneOffset() * 6e4; i = 0; n = new Date(parseInt(o[0]) + i) } } else if (r.stringDate.test(e)) { if ($.isNumeric(e) === true) { var c = (e + "").substr(0, 4); var l = (e + "").substr(4, 2); var d = (e + "").substr(6, 2); var g = (e + "").substr(8, 2); var f = (e + "").substr(10, 2); var w = (e + "").substr(12, 2); n = new Date(c + "/" + l + "/" + (d === "" ? "01" : d) + " " + (g === "" ? "00" : g) + ":" + (f === "" ? "00" : f) + ":" + (w === "" ? "00" : w)) } else { n = (e + "").replace(/[-\.]/g, "/"); n = new Date(n) } } else if (r.dtData.test(e)) { var c = (e + "").substr(0, 4); var l = (e + "").substr(4, 2); var d = (e + "").substr(6, 2); var g = (e + "").substr(8); n = new Date(c + "/" + l + "/" + d + g) } else if (r.cludeTDate.test(e)) { var c = (e + "").substr(0, 4); var l = (e + "").substr(5, 2); var d = (e + "").substr(8, 2); var g = (e + "").substr(11); n = new Date(c + "/" + l + "/" + d + " " + g) } } var p = function (e, t) { if (!t) { t = 2 } e = new String(e); for (var a = 0, n = ""; a < t - e.length; a++) { n += "0" } return n + e }; if (n instanceof Date) { return t.replace(a.datetime, function (e) { switch (e) { case "dd": return p(n.getDate()); case "MM": return p(n.getMonth() + 1); case "yy": return new String(n.getFullYear()).substr(2); case "yyyy": return n.getFullYear(); case "HH": return p(n.getHours()); case "mm": return p(n.getMinutes()); case "ss": return p(n.getSeconds()) } }) } else { return e } } else { return e } }, getUrlParam: function (e) { var t = new RegExp("(^|&)" + e + "=([^&]*)(&|$)"); var a = window.location.search.substr(1).match(t); if (a != null) { return unescape(a[2]) } return null }, IsNullOrEmpty: function (e) { if (e) { var t; if (e == null || e == "") { t = true } else { t = false } return t } }, Substr: function (e, t, a) { if (e && t) { return e.length > t ? e.substr(0, t) + (a || "") : e } return "" }, AddLoading: function (e) { if ($("#wxloading").length == 0) { $("<div>", { id: "wxloading" }).append($("<div>", { class: "wx_loading_inner" }).append($("<svg>", { class: "wx_loading_icon" })).append($("<span>").text(e ? e : "正在加载..."))).appendTo($("body")) } else { $("#wxloading").show() } }, RemoveLoading: function () { $("#wxloading").remove() }, AddLoadingSetClose: function (e, t, a) { $.web.AddLoading(e); setTimeout(function () { if (t) { t() } $.web.RemoveLoading() }, a || 1e3) }, toast: function (e) { switch (typeof e) { case "string": e = { text: e }; break; case "object": break; default: console.warn("toast参数不合法，必须是object或者string类型"); return } var t = { text: "", duration: 3e3 }; var a = $(window).width(); $.extend(t, e); $("#wxtoast").length == 0 ? "" : $("#wxtoast").stop().unbind().remove(); $("body").append($("<div>", { id: "wxtoast" }).hide().text(t.text)); var n = $("#wxtoast"); n.css("left", (a - n.width()) / 2); $("#wxtoast").show().fadeOut(t.duration, function () { $("#wxtoast").remove() }) }, get: function (e, t) { try { var a = { type: "GET", contentType: "application/json;application/x-www-form-urlencoded;charset=utf-8", dataType: "json", async: false }; if (!e) { console.warn("参数不可为空！"); return } switch (typeof e) { case "string": a.url = encodeURI(e); a.data = t || {}; break; case "object": e.url = encodeURI(e.url); $.extend(a, e); break; default: console.warn("参数类型不正确，必须是string,或者object"); return } return $.ajax(a) } catch (e) { console.error(e.message) } }, getAsync: function (e, t) { try { var a = { type: "GET", contentType: "application/json;application/x-www-form-urlencoded;charset=utf-8", dataType: "json" }; if (!e) { console.warn("参数不可为空！"); return } switch (typeof e) { case "string": a.url = encodeURI(e); a.data = t || {}; break; case "object": e.url = encodeURI(e.url); $.extend(a, e); break; default: console.warn("参数类型不正确，必须是string,或者object"); return } return $.ajax(a) } catch (e) { console.error(e.message) } }, post: function (e, t) { try { if (!e) { console.warn("参数不可为空！"); return } var a = { type: "POST", async: false, contentType: "application/json;application/x-www-form-urlencoded;charset=utf-8", dataType: "json" }; switch (typeof e) { case "object": $.extend(a, e); break; case "string": a.data = t || {}; a.url = e; break; default: console.warn("参数类型不合法"); return } a.url = encodeURI(a.url); a.data = JSON.stringify(a.data); return $.ajax(a) } catch (e) { console.error(e.message) } }, postAsync: function (e, t) { try { if (!e) { console.warn("参数不可为空！"); return } var a = { type: "POST", contentType: "application/json;application/x-www-form-urlencoded;charset=utf-8", dataType: "json" }; switch (typeof e) { case "object": $.extend(a, e); break; case "string": a.data = t || {}; a.url = e; break; default: console.warn("参数类型不合法"); return } a.url = encodeURI(a.url); a.data = JSON.stringify(a.data); return $.ajax(a) } catch (e) { console.error(e.message) } } }; $.web = new WebUntils })(jQuery);